syntax = "proto3";

// Sonr API
//
// Sonr is a peer-to-peer identity and asset management system that leverages DID documents, Webauthn, and IPFS â€” providing users with a secure, user-friendly way to manage their digital identity and assets.
package sonrhq.core.identity;

option go_package = "github.com/sonrhq/core/x/identity/types";

message DidDocument {
  repeated string context = 1;
  string id = 2;
  repeated string controller = 3; //optional
  repeated VerificationMethod verification_method = 4; // optional
  repeated string authentication = 5; // optional
  repeated string assertion_method = 6; // optional
  repeated string capability_invocation = 7; // optional
  repeated string capability_delegation = 8; // optional
  repeated string key_agreement = 9; // optional
  repeated Service service = 10; // optional
  repeated string also_known_as = 11; // optional
  repeated KeyValuePair metadata = 12; // optional
}

message VerificationMethod {
  string id = 1;
  string type = 2;
  string controller = 3;
  repeated KeyValuePair public_key_jwk = 4; // optional
  string public_key_multibase = 5; // optional
  string blockchain_account_id = 6; // optional
  repeated KeyValuePair metadata = 7;
}

message VerificationRelationship {
  VerificationMethod verification_method = 1;
  string reference = 2;
}

message Service {
  string id = 1;
  string controller = 2;
  string type = 3;
  string origin = 4;
  string name = 5;
  repeated KeyValuePair service_endpoints = 6; // optional
  repeated KeyValuePair metadata = 7; // optional
}

message KeyValuePair {
  string key = 1;
  string value = 2;
}

// DIDMethod is the DID method for each supported resolver.
enum DIDMethod {
  // DID method for the Sonr network
  DIDMethod_BLOCKCHAIN = 0;

  // DID method for the Ethereum network
  DIDMethod_WEB = 1;

  // DID method for the Cosmos network
  DIDMethod_KEY = 2;

  // DID method for the Filecoin network
  DIDMethod_IPFS = 3;

  // DID method for the Handshake network
  DIDMethod_PEER = 4;
}
